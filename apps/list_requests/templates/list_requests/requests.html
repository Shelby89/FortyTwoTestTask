{% extends "base.html" %}
{% load static %}

{% block title %}({{ count_req }}) Shelby-Test{% endblock title %}

{% block extra_head %}
    <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
    <script type="text/javascript">
        setInterval(function(){
            $.ajax({    
               url: /requests/,
                  success: function(data) {
                  var html = $(data).filter('#refresh').html();
                  $('#refresh').html(html);
                  var myTitle = $(data).filter('title').html();
                  $('title').html(myTitle);
                  }
            });
        }, 2000);
    </script>
{% endblock extra_head %}

{% block content %}
    <!--<h1>Time per session = {{ time_per_session|date:"d/M/Y H:i:s" }}</h1>-->
    <div id="refresh">
    {% if selected_requests %}
        {% for req in selected_requests %}
            <div>Request: [{{ req.request_time|date:"d/M/Y H:i:s" }}] "{{ req.method }} 
            {{ req.path_info }} {{ req.server_protocol }}" 
            {{ req.remote_address }}:{{ req.server_port }}</div>
        {% endfor %}
    {% else %}
        <div class="block3" style="border-top: none;">
        There is no requests generated by you. If you want to see requests you
        need to open some page of this app in new tab.
        </div>
    {% endif %}
    </div>
{% endblock content%}