{% extends "base.html" %}
{% load static %}

{% block title %}Shelby89-Test-{% endblock title %}

{% block extra_head %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="{% static 'js/js_cookie.js' %}"></script>

<script type="text/javascript">
	        function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie != '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = jQuery.trim(cookies[i]);
                        // Does this cookie string begin with the name we want?
                        if (cookie.substring(0, name.length + 1) == (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
            
            var csrftoken = getCookie('csrftoken');

            function csrfSafeMethod(method) {
                // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }
            
            $.ajaxSetup({
                beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                        xhr.setRequestHeader("X-CSRFToken", csrftoken);
                    }
                }
            });

	        $(document).ready(function(){
                $("button").click(function(){
                	$.post("/requests/", {
        		        time: Date()
            		},
            		function(data) {
            			alert(data);
            		});
        		});
	        });
	        $("a").click(function(){
     		    $.post("/requests/", {
 		            time: Date()
     		    },
     		    function(data) {
            			alert(data);
            	});
     	    });
</script>


{% endblock extra_head %}

{% block content %}
<div class="block1">42 Coffee Cups Test Assignment</div>
    {% if contacts%}

				<div class="block2">
							<br>
							{{ contacts.name }}<br><br>
							{{ contacts.last_name }}<br><br>
							{{ contacts.date_of_birth }}<br><br><br>
							Bio:<br>
							{{ contacts.bio|linebreaks }}
				</div>
				<div class="block2">
							Contacts<br><br>
	
							Email: {{ contacts.email }}<br><br>
							Jabber: {{ contacts.jabber }}<br><br>
							Skype: {{ contacts.skype }}<br><br>
							Other contacts:<br>
							{{ contacts.other_contacts|linebreaks }}
				</div>
{% else %}
    <div class="block3">
    There is no information about D.Sapotnitskiy in DB.
    </div>
{% endif %}
	<div class="block3">
		<button>Click me</button>
		<a href='/requests/'>requests</a>
	</div>
{% endblock content %}
